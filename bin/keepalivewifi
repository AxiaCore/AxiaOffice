#!/bin/bash
TESTIP=$(/sbin/ip route | /usr/bin/awk '/default/ { print $3 }')

/bin/ping -c4 ${TESTIP} > /dev/null

if [ $? != 0 ]
then
    /usr/bin/logger -t $0 "WiFi seems down, restarting"
    /sbin/ifdown --force wlan0
    /sbin/ifup wlan0
fi
